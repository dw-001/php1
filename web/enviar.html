<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Enviar Mensaje</title>
  <style>
    body { font-family: system-ui; background: #eef2f7; padding: 2rem; }
    h1 { color: #2a4365; }
    button {
      margin: .5rem; padding: 10px 20px;
      background: #3182ce; color: #fff;
      border: none; border-radius: 5px;
      cursor: pointer;
    }
    button:hover { background: #2b6cb0; }
    textarea {
      width: 100%; height: 120px; padding: .5rem;
      font-family: monospace;
    }
    pre { background: #fff; padding: 1rem; border-radius: 8px; }
  </style>
</head>
<body>
  <h1>ðŸ§© Enviar Mensaje al Servidor</h1>
  <p>Este panel envÃ­a texto al servidor. Puedes probar los dos endpoints:</p>

  <textarea id="mensaje">Hola desde enviar.html</textarea><br>
  <button id="btnEco">Enviar a recibir_peticion.php (eco)</button>
  <button id="btnGuardar">Enviar a recibir_respuesta.php (guardar)</button>

  <h3>ðŸ“œ Respuesta del servidor:</h3>
  <pre id="resultado">Esperando acciÃ³n...</pre>

  <script>
    const servidor = "https://obliged-sole-practice1-0909c43c.koyeb.app"; // Cambia a localhost si pruebas local
    const resultado = document.getElementById("resultado");

    async function post(url, data) {
      const res = await fetch(url, {
        method: "POST",
        headers: { "Content-Type": "text/plain" },
        body: data
      });
      return await res.text();
    }

    document.getElementById("btnEco").addEventListener("click", async () => {
      const msg = document.getElementById("mensaje").value;
      const respuesta = await post(`${servidor}/recibir_peticion.php`, msg);
      resultado.textContent = `ðŸ“¨ Respuesta:\n\n${respuesta}`;
    });

    document.getElementById("btnGuardar").addEventListener("click", async () => {
      const msg = document.getElementById("mensaje").value;
      const respuesta = await post(`${servidor}/recibir_respuesta.php`, msg);
      resultado.textContent = `ðŸ’¾ Guardado:\n\n${respuesta}`;
    });
  </script>
</body>
</html>
